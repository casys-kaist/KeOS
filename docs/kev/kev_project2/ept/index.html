<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Extended Page Table."><title>kev_project2::ept - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="kev_project2" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0-nightly (07d246fc6 2025-08-31)" data-channel="nightly" data-search-js="search-449aa9bf.js" data-stringdex-js="stringdex-0e748618.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module ept</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../kev_project2/index.html">kev_<wbr>project2</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module ept</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#background" title="Background">Background</a></li><li><a href="#tasks" title="Tasks">Tasks</a></li></ul><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate kev_<wbr>project2</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">kev_project2</a></div><h1>Module <span>ept</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/kev_project2/ept.rs.html#1-513">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Extended Page Table.</p>
<h3 id="background"><a class="doc-anchor" href="#background">Â§</a>Background</h3>
<p>When multiple virtual machines are running on a single physical machine, the
hypervisor must need to have a method for mapping virtual machineâ€™s memory
addresses to the physical memory addresses of the host memory.
For this purpose, the hypervisor emulates the guest page table through
Shadow Paging. However, virtualizing memory access by shadow paging requires
processing all requests for virtual address translation demanded by all
virtual machine OS kernels (such as CR3 register access, page table
modifications, and VA-PA translation via MMU). EPT allows virtual machines
to have their page tables, which map virtual addresses to physical
addresses, while also allowing the hypervisor to maintain its own page table
for the host machine.</p>
<h3 id="tasks"><a class="doc-anchor" href="#tasks">Â§</a>Tasks</h3>
<p>In this project, you are requested to implement of the Extended Page Table
for the gKeOS operating system. To manage and translate the guest physical
address to the host physical address, <a href="../simple_ept_vm/index.html" title="mod kev_project2::simple_ept_vm"><code>simple_ept_vm</code></a> uses the implemented
EPT functionalities in this project. The main concept of this project is
similar to the page table implementations of Project 1. You have to
implement <a href="struct.ExtendedPageTable.html#method.map" title="method kev_project2::ept::ExtendedPageTable::map"><code>ExtendedPageTable::map</code></a>, <a href="struct.ExtendedPageTable.html#method.unmap" title="method kev_project2::ept::ExtendedPageTable::unmap"><code>ExtendedPageTable::unmap</code></a> and
<a href="struct.ExtendedPageTable.html#method.walk" title="method kev_project2::ept::ExtendedPageTable::walk"><code>ExtendedPageTable::walk</code></a> to be used for managing extended page table.
In contrast to the page table implementation from Project 1, EPT determines
the presence of an entry by examining the presence of flags in page table
entries. Stated differently, if there are no flags present in an EPT entry,
this indicates that the physical address referenced by the entry is not
valid (i.e., it is set to None). It is important to account for huge pages
in the address translation process <a href="../../kev/probe/trait.Probe.html#tymethod.gpa2hpa" title="method kev::probe::Probe::gpa2hpa"><code>kev::Probe::gpa2hpa</code></a>, as there are
instances where the allocation of huge pages cannot be avoided in x86 at the
initial boot time.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.EptPde.html" title="struct kev_project2::ept::EptPde">EptPde</a></dt><dt><a class="struct" href="struct.EptPdeFlags.html" title="struct kev_project2::ept::EptPdeFlags">EptPde<wbr>Flags</a></dt><dd>Table 28-5. Format of an EPT Page-Directory Entry (PDE) that References an EPT Page Table</dd><dt><a class="struct" href="struct.EptPdpe.html" title="struct kev_project2::ept::EptPdpe">EptPdpe</a></dt><dt><a class="struct" href="struct.EptPdpeFlags.html" title="struct kev_project2::ept::EptPdpeFlags">EptPdpe<wbr>Flags</a></dt><dd>Table 28-3. Format of an EPT Page-Directory-Pointer-Table Entry (PDPTE) that References an EPT Page Directory</dd><dt><a class="struct" href="struct.EptPml4e.html" title="struct kev_project2::ept::EptPml4e">EptPml4e</a></dt><dt><a class="struct" href="struct.EptPml4eFlags.html" title="struct kev_project2::ept::EptPml4eFlags">EptPml4e<wbr>Flags</a></dt><dd>Table 28-1. Format of an EPT PML4 Entry (PML4E) that References an EPT Page-Directory-Pointer Table</dd><dt><a class="struct" href="struct.EptPte.html" title="struct kev_project2::ept::EptPte">EptPte</a></dt><dt><a class="struct" href="struct.EptPteFlags.html" title="struct kev_project2::ept::EptPteFlags">EptPte<wbr>Flags</a></dt><dd>Table 29-6. Format of an EPT Page-Table Entry that Maps a 4-KByte Page</dd><dt><a class="struct" href="struct.ExtendedPageTable.html" title="struct kev_project2::ept::ExtendedPageTable">Extended<wbr>Page<wbr>Table</a></dt><dd>Second level page table that holds guest-physical to host-physical mapping.</dd><dt><a class="struct" href="struct.Inner.html" title="struct kev_project2::ept::Inner">Inner</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="struct" href="struct.Permission.html" title="struct kev_project2::ept::Permission">Permission</a></dt><dd>Possible memory permissions.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.EptMappingError.html" title="enum kev_project2::ept::EptMappingError">EptMapping<wbr>Error</a></dt></dl></section></div></main></body></html>