<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Represents the internal structure of a Fast File System (FFS)."><title>FastFileSystemInner in keos_project5::ffs - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-069232aa.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="keos_project5" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0-nightly (425a9c0a0 2025-08-17)" data-channel="nightly" data-search-js="search-b069538f.js" data-settings-js="settings-5514c975.js" ><script src="../../static.files/storage-68b7e25d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-eebb9057.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../keos_project5/index.html">keos_<wbr>project5</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Fast<wbr>File<wbr>System<wbr>Inner</a></h2><h3><a href="#fields">Fields</a></h3><ul class="block structfield"><li><a href="#structfield.block_count" title="block_count">block_count</a></li><li><a href="#structfield.blocks" title="blocks">blocks</a></li><li><a href="#structfield.debug_journal" title="debug_journal">debug_journal</a></li><li><a href="#structfield.disk" title="disk">disk</a></li><li><a href="#structfield.has_journal" title="has_journal">has_journal</a></li><li><a href="#structfield.inode_count" title="inode_count">inode_count</a></li><li><a href="#structfield.inodes" title="inodes">inodes</a></li><li><a href="#structfield.journal" title="journal">journal</a></li><li><a href="#structfield.sb" title="sb">sb</a></li></ul><h3><a href="#implementations">Methods</a></h3><ul class="block method"><li><a href="#method.allocate_block" title="allocate_block">allocate_block</a></li><li><a href="#method.allocate_inode" title="allocate_inode">allocate_inode</a></li><li><a href="#method.block_bitmap" title="block_bitmap">block_bitmap</a></li><li><a href="#method.data_block_start" title="data_block_start">data_block_start</a></li><li><a href="#method.from_raw_sb" title="from_raw_sb">from_raw_sb</a></li><li><a href="#method.get_inode" title="get_inode">get_inode</a></li><li><a href="#method.get_inode_array_lba_index" title="get_inode_array_lba_index">get_inode_array_lba_index</a></li><li><a href="#method.get_inode_bitmap_lba_index" title="get_inode_bitmap_lba_index">get_inode_bitmap_lba_index</a></li><li><a href="#method.inode" title="inode">inode</a></li><li><a href="#method.inode_bitmap" title="inode_bitmap">inode_bitmap</a></li><li><a href="#method.journal" title="journal">journal</a></li><li><a href="#method.open_transaction" title="open_transaction">open_transaction</a></li><li><a href="#method.read_data_block" title="read_data_block">read_data_block</a></li><li><a href="#method.remove_inode" title="remove_inode">remove_inode</a></li><li><a href="#method.write_data_block" title="write_data_block">write_data_block</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block synthetic-implementation"><li><a href="#impl-Freeze-for-FastFileSystemInner" title="!Freeze">!Freeze</a></li><li><a href="#impl-RefUnwindSafe-for-FastFileSystemInner" title="!RefUnwindSafe">!RefUnwindSafe</a></li><li><a href="#impl-UnwindSafe-for-FastFileSystemInner" title="!UnwindSafe">!UnwindSafe</a></li><li><a href="#impl-Send-for-FastFileSystemInner" title="Send">Send</a></li><li><a href="#impl-Sync-for-FastFileSystemInner" title="Sync">Sync</a></li><li><a href="#impl-Unpin-for-FastFileSystemInner" title="Unpin">Unpin</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block blanket-implementation"><li><a href="#impl-Any-for-T" title="Any">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-T" title="Borrow&#60;T&#62;">Borrow&#60;T&#62;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-T" title="BorrowMut&#60;T&#62;">BorrowMut&#60;T&#62;</a></li><li><a href="#impl-From%3CT%3E-for-T" title="From&#60;T&#62;">From&#60;T&#62;</a></li><li><a href="#impl-Into%3CU%3E-for-T" title="Into&#60;U&#62;">Into&#60;U&#62;</a></li><li><a href="#impl-TryFrom%3CU%3E-for-T" title="TryFrom&#60;U&#62;">TryFrom&#60;U&#62;</a></li><li><a href="#impl-TryInto%3CU%3E-for-T" title="TryInto&#60;U&#62;">TryInto&#60;U&#62;</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In keos_<wbr>project5::<wbr>ffs</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">keos_project5</a>::<wbr><a href="index.html">ffs</a></div><h1>Struct <span class="struct">FastFileSystemInner</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/keos_project5/ffs/mod.rs.html#188-222">Source</a> </span></div><pre class="rust item-decl"><code>pub struct FastFileSystemInner {
    pub(crate) disk: <a class="struct" href="../../keos/fs/struct.Disk.html" title="struct keos::fs::Disk">Disk</a>,
    pub block_count: usize,
    pub inode_count: usize,
    pub has_journal: usize,
    pub blocks: SpinLock&lt;<a class="struct" href="../lru/struct.LRUCache.html" title="struct keos_project5::lru::LRUCache">LRUCache</a>&lt;<a class="struct" href="types/struct.LogicalBlockAddress.html" title="struct keos_project5::ffs::types::LogicalBlockAddress">LogicalBlockAddress</a>, Arc&lt;SpinLock&lt;[u8; 4096]&gt;&gt;, 512&gt;&gt;,
    pub sb: <a class="struct" href="access_control/struct.BlockPointsTo.html" title="struct keos_project5::ffs::access_control::BlockPointsTo">BlockPointsTo</a>&lt;<a class="struct" href="disk_layout/struct.SuperBlock.html" title="struct keos_project5::ffs::disk_layout::SuperBlock">SuperBlock</a>&gt;,
    pub inodes: SpinLock&lt;BTreeMap&lt;<a class="struct" href="../../keos/fs/struct.InodeNumber.html" title="struct keos::fs::InodeNumber">InodeNumber</a>, Arc&lt;<a class="struct" href="../../keos/sync/rwlock/struct.RwLock.html" title="struct keos::sync::rwlock::RwLock">RwLock</a>&lt;<a class="struct" href="inode/struct.Inode.html" title="struct keos_project5::ffs::inode::Inode">Inode</a>&gt;&gt;&gt;&gt;,
    pub journal: Option&lt;SpinLock&lt;<a class="struct" href="journal/struct.Journal.html" title="struct keos_project5::ffs::journal::Journal">Journal</a>&gt;&gt;,
    pub debug_journal: bool,
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Represents the internal structure of a Fast File System (FFS).</p>
<p>This structure encapsulates the core components of the FFS implementation,
including metadata loaded from disk, in-memory caches, and journal state.
It provides the foundational layer for all low-level filesystem operations,
such as reading/writing blocks and accessing inode metadata.</p>
<p>This type is used internally by <a href="struct.FastFileSystem.html" title="struct keos_project5::ffs::FastFileSystem"><code>FastFileSystem</code></a> and is not intended
to be accessed directly by external code.</p>
</div></details><h2 id="fields" class="fields section-header">Fields<a href="#fields" class="anchor">§</a></h2><span id="structfield.disk" class="structfield section-header"><a href="#structfield.disk" class="anchor field">§</a><code>disk: <a class="struct" href="../../keos/fs/struct.Disk.html" title="struct keos::fs::Disk">Disk</a></code></span><div class="docblock"><p>The underlying disk device used by the filesystem.</p>
</div><span id="structfield.block_count" class="structfield section-header"><a href="#structfield.block_count" class="anchor field">§</a><code>block_count: usize</code></span><div class="docblock"><p>Total number of blocks available in the filesystem.</p>
</div><span id="structfield.inode_count" class="structfield section-header"><a href="#structfield.inode_count" class="anchor field">§</a><code>inode_count: usize</code></span><div class="docblock"><p>Total number of inodes supported by the filesystem.</p>
</div><span id="structfield.has_journal" class="structfield section-header"><a href="#structfield.has_journal" class="anchor field">§</a><code>has_journal: usize</code></span><div class="docblock"><p>Indicate this file system support journaling.</p>
</div><span id="structfield.blocks" class="structfield section-header"><a href="#structfield.blocks" class="anchor field">§</a><code>blocks: SpinLock&lt;<a class="struct" href="../lru/struct.LRUCache.html" title="struct keos_project5::lru::LRUCache">LRUCache</a>&lt;<a class="struct" href="types/struct.LogicalBlockAddress.html" title="struct keos_project5::ffs::types::LogicalBlockAddress">LogicalBlockAddress</a>, Arc&lt;SpinLock&lt;[u8; 4096]&gt;&gt;, 512&gt;&gt;</code></span><div class="docblock"><p>The expected view of the disk after all journaled changes are
checkpointed.</p>
<p>This in-memory map reflects the filesystem state after applying
journaled updates, but may differ from the actual disk contents if a
crash occurred before checkpointing.</p>
</div><span id="structfield.sb" class="structfield section-header"><a href="#structfield.sb" class="anchor field">§</a><code>sb: <a class="struct" href="access_control/struct.BlockPointsTo.html" title="struct keos_project5::ffs::access_control::BlockPointsTo">BlockPointsTo</a>&lt;<a class="struct" href="disk_layout/struct.SuperBlock.html" title="struct keos_project5::ffs::disk_layout::SuperBlock">SuperBlock</a>&gt;</code></span><div class="docblock"><p>On-disk superblock structure, wrapped in metadata-aware
block access.</p>
</div><span id="structfield.inodes" class="structfield section-header"><a href="#structfield.inodes" class="anchor field">§</a><code>inodes: SpinLock&lt;BTreeMap&lt;<a class="struct" href="../../keos/fs/struct.InodeNumber.html" title="struct keos::fs::InodeNumber">InodeNumber</a>, Arc&lt;<a class="struct" href="../../keos/sync/rwlock/struct.RwLock.html" title="struct keos::sync::rwlock::RwLock">RwLock</a>&lt;<a class="struct" href="inode/struct.Inode.html" title="struct keos_project5::ffs::inode::Inode">Inode</a>&gt;&gt;&gt;&gt;</code></span><div class="docblock"><p>In-memory table mapping inode numbers to their live representations.</p>
</div><span id="structfield.journal" class="structfield section-header"><a href="#structfield.journal" class="anchor field">§</a><code>journal: Option&lt;SpinLock&lt;<a class="struct" href="journal/struct.Journal.html" title="struct keos_project5::ffs::journal::Journal">Journal</a>&gt;&gt;</code></span><div class="docblock"><p>The current state of the journal (if present), wrapped in a
lock to allow mutable access during journal operations.</p>
</div><span id="structfield.debug_journal" class="structfield section-header"><a href="#structfield.debug_journal" class="anchor field">§</a><code>debug_journal: bool</code></span><div class="docblock"><p>Whether trace the transactions for debugging purpose.</p>
</div><h2 id="implementations" class="section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-FastFileSystemInner" class="impl"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#224-612">Source</a><a href="#impl-FastFileSystemInner" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.FastFileSystemInner.html" title="struct keos_project5::ffs::FastFileSystemInner">FastFileSystemInner</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from_raw_sb" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#229-285">Source</a><h4 class="code-header">pub fn <a href="#method.from_raw_sb" class="fn">from_raw_sb</a>(
    sb: <a class="struct" href="access_control/struct.BlockPointsTo.html" title="struct keos_project5::ffs::access_control::BlockPointsTo">BlockPointsTo</a>&lt;<a class="struct" href="disk_layout/struct.SuperBlock.html" title="struct keos_project5::ffs::disk_layout::SuperBlock">SuperBlock</a>&gt;,
    disk: <a class="struct" href="../../keos/fs/struct.Disk.html" title="struct keos::fs::Disk">Disk</a>,
    debug_journal: bool,
    disable_journal: bool,
) -&gt; Result&lt;Self, <a class="enum" href="../../keos/enum.KernelError.html" title="enum keos::KernelError">KernelError</a>&gt;</h4></section></summary><div class="docblock"><p>Constructs a new file system instance from an on-disk superblock.</p>
<p>This function initializes a <a href="struct.FastFileSystemInner.html" title="struct keos_project5::ffs::FastFileSystemInner"><code>FastFileSystemInner</code></a> by reading the
provided superblock and setting up access to the underlying disk.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.inode_bitmap" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#291-294">Source</a><h4 class="code-header">pub fn <a href="#method.inode_bitmap" class="fn">inode_bitmap</a>(&amp;self) -&gt; Range&lt;<a class="struct" href="types/struct.LogicalBlockAddress.html" title="struct keos_project5::ffs::types::LogicalBlockAddress">LogicalBlockAddress</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the range of block address of the inode bitmap.</p>
<p>The inode bitmap is located immediately after the inode table.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.block_bitmap" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#300-303">Source</a><h4 class="code-header">pub fn <a href="#method.block_bitmap" class="fn">block_bitmap</a>(&amp;self) -&gt; Range&lt;<a class="struct" href="types/struct.LogicalBlockAddress.html" title="struct keos_project5::ffs::types::LogicalBlockAddress">LogicalBlockAddress</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the range of block address of the block bitmap.</p>
<p>The block bitmap follows the inode bitmap.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.journal" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#309-317">Source</a><h4 class="code-header">pub fn <a href="#method.journal" class="fn">journal</a>(&amp;self) -&gt; Range&lt;<a class="struct" href="types/struct.LogicalBlockAddress.html" title="struct keos_project5::ffs::types::LogicalBlockAddress">LogicalBlockAddress</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the range of block address of the journal.</p>
<p>The data block region follows the bitmaps.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.inode" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#323-328">Source</a><h4 class="code-header">pub fn <a href="#method.inode" class="fn">inode</a>(&amp;self) -&gt; Range&lt;<a class="struct" href="types/struct.LogicalBlockAddress.html" title="struct keos_project5::ffs::types::LogicalBlockAddress">LogicalBlockAddress</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the range of the block address of the Inode[] startpoint.</p>
<p>The data block region follows the bitmaps.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.data_block_start" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#334-336">Source</a><h4 class="code-header">pub fn <a href="#method.data_block_start" class="fn">data_block_start</a>(&amp;self) -&gt; <a class="struct" href="types/struct.LogicalBlockAddress.html" title="struct keos_project5::ffs::types::LogicalBlockAddress">LogicalBlockAddress</a></h4></section></summary><div class="docblock"><p>Returns the starting block address of the data blocks.</p>
<p>The data block region follows the bitmaps and journal.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.open_transaction" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#344-346">Source</a><h4 class="code-header">pub fn <a href="#method.open_transaction" class="fn">open_transaction</a>(&amp;self, name: &amp;str) -&gt; <a class="struct" href="journal/struct.RunningTransaction.html" title="struct keos_project5::ffs::journal::RunningTransaction">RunningTransaction</a>&lt;'_&gt;</h4></section></summary><div class="docblock"><p>Opens a new running transaction.</p>
<p>This function begins a transaction on the file system, allowing
multiple operations to be grouped together atomically. Transactions
ensure crash consistency by recording updates in the journal before
they are committed to the main file system.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.read_data_block" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#353-370">Source</a><h4 class="code-header">pub fn <a href="#method.read_data_block" class="fn">read_data_block</a>(
    &amp;self,
    lba: <a class="struct" href="types/struct.LogicalBlockAddress.html" title="struct keos_project5::ffs::types::LogicalBlockAddress">LogicalBlockAddress</a>,
) -&gt; Result&lt;Box&lt;[u8; 4096]&gt;, <a class="enum" href="../../keos/enum.KernelError.html" title="enum keos::KernelError">KernelError</a>&gt;</h4></section></summary><div class="docblock"><p>Reads a data block from disk.</p>
<p>This function retrieves the 4 KiB block located at the specified
logical block address (LBA) from the underlying disk. It is used for
reading file data on disk.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.write_data_block" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#377-394">Source</a><h4 class="code-header">pub fn <a href="#method.write_data_block" class="fn">write_data_block</a>(
    &amp;self,
    lba: <a class="struct" href="types/struct.LogicalBlockAddress.html" title="struct keos_project5::ffs::types::LogicalBlockAddress">LogicalBlockAddress</a>,
    b: &amp;[u8; 4096],
) -&gt; Result&lt;(), <a class="enum" href="../../keos/enum.KernelError.html" title="enum keos::KernelError">KernelError</a>&gt;</h4></section></summary><div class="docblock"><p>Writes a 4 KiB data block to disk.</p>
<p>This function stores the given buffer at the specified logical block
address (LBA) on the underlying disk. It is typically used for writing
file contents.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_inode_bitmap_lba_index" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#409-420">Source</a><h4 class="code-header">pub fn <a href="#method.get_inode_bitmap_lba_index" class="fn">get_inode_bitmap_lba_index</a>(
    &amp;self,
    ino: <a class="struct" href="../../keos/fs/struct.InodeNumber.html" title="struct keos::fs::InodeNumber">InodeNumber</a>,
) -&gt; Option&lt;(<a class="struct" href="types/struct.LogicalBlockAddress.html" title="struct keos_project5::ffs::types::LogicalBlockAddress">LogicalBlockAddress</a>, usize)&gt;</h4></section></summary><div class="docblock"><p>Converts this inode number into the corresponding location in the inode
bitmap.</p>
<h5 id="arguments"><a class="doc-anchor" href="#arguments">§</a>Arguments</h5>
<ul>
<li><code>fs</code>: Reference to the file system’s internal metadata layout.</li>
</ul>
<h5 id="returns"><a class="doc-anchor" href="#returns">§</a>Returns</h5>
<ul>
<li><code>Some((lba, offset)</code>: if the inode number is valid, which includes:
<ul>
<li><code>lba</code>: the logical block address of the inode bitmap block that
contains this inode.</li>
<li><code>offset</code>: the bit offset within that bitmap block corresponding to
this inode.</li>
</ul>
</li>
<li><code>None</code>: if the inode number is out of bounds.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_inode_array_lba_index" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#434-449">Source</a><h4 class="code-header">pub fn <a href="#method.get_inode_array_lba_index" class="fn">get_inode_array_lba_index</a>(
    &amp;self,
    ino: <a class="struct" href="../../keos/fs/struct.InodeNumber.html" title="struct keos::fs::InodeNumber">InodeNumber</a>,
) -&gt; Option&lt;(<a class="struct" href="types/struct.LogicalBlockAddress.html" title="struct keos_project5::ffs::types::LogicalBlockAddress">LogicalBlockAddress</a>, usize)&gt;</h4></section></summary><div class="docblock"><p>Converts this inode number into the corresponding location in the inode
array.</p>
<h5 id="returns-1"><a class="doc-anchor" href="#returns-1">§</a>Returns</h5>
<ul>
<li><code>Some((lba, offset))</code>: if the inode number is valid, which includes:
<ul>
<li><code>lba</code>: the logical block address where the containing <a href="disk_layout/struct.InodeArray.html" title="struct keos_project5::ffs::disk_layout::InodeArray"><code>InodeArray</code></a>
is located.</li>
<li><code>offset</code>:the index within that array where this specific inode
resides.</li>
</ul>
</li>
<li><code>None</code>: if the inode number is out of bounds.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="method.allocate_inode" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#491-531">Source</a><h4 class="code-header">pub fn <a href="#method.allocate_inode" class="fn">allocate_inode</a>(
    self: &amp;Arc&lt;Self&gt;,
    is_dir: bool,
    tx: &amp;<a class="struct" href="journal/struct.RunningTransaction.html" title="struct keos_project5::ffs::journal::RunningTransaction">RunningTransaction</a>&lt;'_&gt;,
) -&gt; Result&lt;(<a class="struct" href="../../keos/fs/struct.InodeNumber.html" title="struct keos::fs::InodeNumber">InodeNumber</a>, <a class="struct" href="access_control/struct.TrackedInode.html" title="struct keos_project5::ffs::access_control::TrackedInode">TrackedInode</a>), <a class="enum" href="../../keos/enum.KernelError.html" title="enum keos::KernelError">KernelError</a>&gt;</h4></section></summary><div class="docblock"><p>Allocates a new inode in the file system.</p>
<p>This function creates a new inode on disk and returns both its
inode number and a <a href="access_control/struct.TrackedInode.html" title="struct keos_project5::ffs::access_control::TrackedInode"><code>TrackedInode</code></a> handle for in-memory access.
The allocation is recorded in the given transaction for crash
consistency.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.allocate_block" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#538-557">Source</a><h4 class="code-header">pub fn <a href="#method.allocate_block" class="fn">allocate_block</a>(
    &amp;self,
    tx: &amp;<a class="struct" href="journal/struct.RunningTransaction.html" title="struct keos_project5::ffs::journal::RunningTransaction">RunningTransaction</a>&lt;'_&gt;,
) -&gt; Result&lt;<a class="struct" href="types/struct.LogicalBlockAddress.html" title="struct keos_project5::ffs::types::LogicalBlockAddress">LogicalBlockAddress</a>, <a class="enum" href="../../keos/enum.KernelError.html" title="enum keos::KernelError">KernelError</a>&gt;</h4></section></summary><div class="docblock"><p>Allocates a new data block on disk.</p>
<p>This function reserves a free block for use in the file system,
recording the allocation in the active transaction. The block is
marked as used in the allocation bitmap and returned to the caller.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_inode" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#566-592">Source</a><h4 class="code-header">pub fn <a href="#method.get_inode" class="fn">get_inode</a>(
    self: &amp;Arc&lt;Self&gt;,
    ino: <a class="struct" href="../../keos/fs/struct.InodeNumber.html" title="struct keos::fs::InodeNumber">InodeNumber</a>,
) -&gt; Result&lt;<a class="struct" href="access_control/struct.TrackedInode.html" title="struct keos_project5::ffs::access_control::TrackedInode">TrackedInode</a>, <a class="enum" href="../../keos/enum.KernelError.html" title="enum keos::KernelError">KernelError</a>&gt;</h4></section></summary><div class="docblock"><p>Retrieves an inode from disk or cache.</p>
<p>This function returns a <a href="access_control/struct.TrackedInode.html" title="struct keos_project5::ffs::access_control::TrackedInode"><code>TrackedInode</code></a> corresponding to the given
inode number. If the inode is cached in memory, it is returned
directly; otherwise, it is read from disk and added to the cache.</p>
<p>This method manages a “unique view” of a single inode.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.remove_inode" class="method"><a class="src rightside" href="../../src/keos_project5/ffs/mod.rs.html#599-611">Source</a><h4 class="code-header">pub fn <a href="#method.remove_inode" class="fn">remove_inode</a>(&amp;self, ino: <a class="struct" href="../../keos/fs/struct.InodeNumber.html" title="struct keos::fs::InodeNumber">InodeNumber</a>) -&gt; Option&lt;Arc&lt;<a class="struct" href="../../keos/sync/rwlock/struct.RwLock.html" title="struct keos::sync::rwlock::RwLock">RwLock</a>&lt;<a class="struct" href="inode/struct.Inode.html" title="struct keos_project5::ffs::inode::Inode">Inode</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Removes an inode from the in-memory inode table.</p>
<p>This function evicts the given inode from the inode cache maintained
by the file system. It does not remove the inode’s contents on disk,
only its in-memory representation.</p>
</div></details></div></details></div><h2 id="synthetic-implementations" class="section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">§</a></h2><div id="synthetic-implementations-list"><section id="impl-Freeze-for-FastFileSystemInner" class="impl"><a href="#impl-Freeze-for-FastFileSystemInner" class="anchor">§</a><h3 class="code-header">impl !Freeze for <a class="struct" href="struct.FastFileSystemInner.html" title="struct keos_project5::ffs::FastFileSystemInner">FastFileSystemInner</a></h3></section><section id="impl-RefUnwindSafe-for-FastFileSystemInner" class="impl"><a href="#impl-RefUnwindSafe-for-FastFileSystemInner" class="anchor">§</a><h3 class="code-header">impl !RefUnwindSafe for <a class="struct" href="struct.FastFileSystemInner.html" title="struct keos_project5::ffs::FastFileSystemInner">FastFileSystemInner</a></h3></section><section id="impl-Send-for-FastFileSystemInner" class="impl"><a href="#impl-Send-for-FastFileSystemInner" class="anchor">§</a><h3 class="code-header">impl Send for <a class="struct" href="struct.FastFileSystemInner.html" title="struct keos_project5::ffs::FastFileSystemInner">FastFileSystemInner</a></h3></section><section id="impl-Sync-for-FastFileSystemInner" class="impl"><a href="#impl-Sync-for-FastFileSystemInner" class="anchor">§</a><h3 class="code-header">impl Sync for <a class="struct" href="struct.FastFileSystemInner.html" title="struct keos_project5::ffs::FastFileSystemInner">FastFileSystemInner</a></h3></section><section id="impl-Unpin-for-FastFileSystemInner" class="impl"><a href="#impl-Unpin-for-FastFileSystemInner" class="anchor">§</a><h3 class="code-header">impl Unpin for <a class="struct" href="struct.FastFileSystemInner.html" title="struct keos_project5::ffs::FastFileSystemInner">FastFileSystemInner</a></h3></section><section id="impl-UnwindSafe-for-FastFileSystemInner" class="impl"><a href="#impl-UnwindSafe-for-FastFileSystemInner" class="anchor">§</a><h3 class="code-header">impl !UnwindSafe for <a class="struct" href="struct.FastFileSystemInner.html" title="struct keos_project5::ffs::FastFileSystemInner">FastFileSystemInner</a></h3></section></div><h2 id="blanket-implementations" class="section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-T" class="impl"><a href="#impl-Any-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; Any for T<div class="where">where
    T: 'static + ?Sized,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a class="fn">type_id</a>(&amp;self) -&gt; TypeId</h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a>Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-T" class="impl"><a href="#impl-Borrow%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; Borrow&lt;T&gt; for T<div class="where">where
    T: ?Sized,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a class="fn">borrow</a>(&amp;self) -&gt; &amp;T</h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a>Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-T" class="impl"><a href="#impl-BorrowMut%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; BorrowMut&lt;T&gt; for T<div class="where">where
    T: ?Sized,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a class="fn">borrow_mut</a>(&amp;mut self) -&gt; &amp;mut T</h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a>Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-T" class="impl"><a href="#impl-From%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; From&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-T" class="impl"><a href="#impl-Into%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; Into&lt;U&gt; for T<div class="where">where
    U: From&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code>[From]&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-T" class="impl"><a href="#impl-TryFrom%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; TryFrom&lt;U&gt; for T<div class="where">where
    U: Into&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a class="associatedtype">Error</a> = Infallible</h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a class="fn">try_from</a>(value: U) -&gt; Result&lt;T, &lt;T as TryFrom&lt;U&gt;&gt;::Error&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-T" class="impl"><a href="#impl-TryInto%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; TryInto&lt;U&gt; for T<div class="where">where
    U: TryFrom&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a class="associatedtype">Error</a> = &lt;U as TryFrom&lt;T&gt;&gt;::Error</h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a class="fn">try_into</a>(self) -&gt; Result&lt;U, &lt;U as TryFrom&lt;T&gt;&gt;::Error&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div></section></div></main></body></html>