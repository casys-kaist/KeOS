<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="on-disk layout of the file system’s metadata structures."><title>keos_project5::ffs::disk_layout - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="keos_project5" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0-nightly (07d246fc6 2025-08-31)" data-channel="nightly" data-search-js="search-449aa9bf.js" data-stringdex-js="stringdex-0e748618.js" data-settings-js="settings-c38705f0.js" ><script src="../../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module disk_layout</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../keos_project5/index.html">keos_<wbr>project5</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module disk_<wbr>layout</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#examples-of-accessing-metadata" title="Examples of accessing metadata.">Examples of accessing metadata.</a></li></ul><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In keos_<wbr>project5::<wbr>ffs</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">keos_project5</a>::<wbr><a href="../index.html">ffs</a></div><h1>Module <span>disk_<wbr>layout</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/keos_project5/ffs/disk_layout.rs.html#1-670">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p><strong>on-disk layout</strong> of the file system’s metadata structures.</p>
<p>This module defines the <strong>on-disk layout</strong> of the file system’s core
metadata structures. These types represent raw disk-resident data such as
the superblock, block/inode allocation bitmaps, and inode table. Each struct
in this module is tightly packed and designed to match the exact binary
layout used by the file system when persisting and loading from disk.</p>
<p>This module defines <a href="../access_control/trait.MetaData.html" title="trait keos_project5::ffs::access_control::MetaData"><code>MetaData</code></a> trait, and support <a href="../access_control/trait.MetaData.html#method.load" title="associated function keos_project5::ffs::access_control::MetaData::load"><code>MetaData::load</code></a>
method, allowing them to be generically loaded from a logical block address
(LBA).</p>
<h3 id="examples-of-accessing-metadata"><a class="doc-anchor" href="#examples-of-accessing-metadata">§</a>Examples of accessing metadata.</h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span><span class="kw">crate</span>::ffs::disk_layout::{MetaData, BlockBitmap};

<span class="kw">let </span>block_bitmap = BlockBitmap::load(ffs, lba)<span class="question-mark">?</span>; <span class="comment">// read BlockPointsTo&lt;BlockBitMap&gt; from lba.
</span>{ <span class="comment">// READ
    </span><span class="kw">let </span>guard = block_bitmap.read(); <span class="comment">// reading metadata does not requires transaction.
    </span><span class="macro">assert!</span>(guard.is_allocated(<span class="number">0</span>));
}
{ <span class="comment">// WRITE
    </span><span class="kw">let </span>tx = ffs.open_transaction(); <span class="comment">// Open a new transaction. Only a single transaction can be existed.
    </span><span class="kw">let </span><span class="kw-2">mut </span>guard = block_bitmap.write(<span class="kw-2">&amp;</span>tx); <span class="comment">// writing metadata requires transaction.
    </span>guard.try_allocate(<span class="number">1</span>);
    guard.submit(); <span class="comment">// Submit the modified change to the transaction.
</span>}</code></pre></div>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.BlockBitmap.html" title="struct keos_project5::ffs::disk_layout::BlockBitmap">Block<wbr>Bitmap</a></dt><dd>Represents the on-disk block allocation bitmap for the file system.</dd><dt><a class="struct" href="struct.DirectoryBlock.html" title="struct keos_project5::ffs::disk_layout::DirectoryBlock">Directory<wbr>Block</a></dt><dd>Represents a block that contains multiple directory entries.</dd><dt><a class="struct" href="struct.DirectoryBlockEntry.html" title="struct keos_project5::ffs::disk_layout::DirectoryBlockEntry">Directory<wbr>Block<wbr>Entry</a></dt><dd>Represent a single directory entry within a directory block.</dd><dt><a class="struct" href="struct.IndirectBlock.html" title="struct keos_project5::ffs::disk_layout::IndirectBlock">Indirect<wbr>Block</a></dt><dd>Represents an indirect block in the filesystem.</dd><dt><a class="struct" href="struct.Inode.html" title="struct keos_project5::ffs::disk_layout::Inode">Inode</a></dt><dd>Represent a single inode within a inode array.</dd><dt><a class="struct" href="struct.InodeArray.html" title="struct keos_project5::ffs::disk_layout::InodeArray">Inode<wbr>Array</a></dt><dd>Represents a fixed-size array of inodes loaded from a block.</dd><dt><a class="struct" href="struct.InodeBitmap.html" title="struct keos_project5::ffs::disk_layout::InodeBitmap">Inode<wbr>Bitmap</a></dt><dd>Represents the on-disk inode allocation bitmap for the file system.</dd><dt><a class="struct" href="struct.JournalSb.html" title="struct keos_project5::ffs::disk_layout::JournalSb">Journal<wbr>Sb</a></dt><dd>Represents the on-disk metadata for the journal superblock.</dd><dt><a class="struct" href="struct.JournalTxBegin.html" title="struct keos_project5::ffs::disk_layout::JournalTxBegin">Journal<wbr>TxBegin</a></dt><dd>Represents a journal transaction header used to track modified blocks.</dd><dt><a class="struct" href="struct.JournalTxEnd.html" title="struct keos_project5::ffs::disk_layout::JournalTxEnd">Journal<wbr>TxEnd</a></dt><dd>Represents a journal transaction is ended.</dd><dt><a class="struct" href="struct.SuperBlock.html" title="struct keos_project5::ffs::disk_layout::SuperBlock">Super<wbr>Block</a></dt><dd>On-disk representation of the superblock of the Fast File System (FFS).</dd></dl></section></div></main></body></html>