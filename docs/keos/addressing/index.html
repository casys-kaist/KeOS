<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Physical and Virtual Memory Addressing Schemes."><title>keos::addressing - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="keos" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0-nightly (07d246fc6 2025-08-31)" data-channel="nightly" data-search-js="search-449aa9bf.js" data-stringdex-js="stringdex-0e748618.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module addressing</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../keos/index.html">keos</a><span class="version">1.0.4</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module addressing</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#arithmetic-operations" title="Arithmetic Operations">Arithmetic Operations</a></li><li><a href="#example-usage" title="Example Usage:">Example Usage:</a></li></ul><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#constants" title="Constants">Constants</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate keos</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">keos</a></div><h1>Module <span>addressing</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Physical and Virtual Memory Addressing Schemes.</p>
<p>This module provides abstractions for virtual address and physical
address. In the keos kernel, kernel virtual memory is directly mapped to
physical memory. The first page of kernel virtual memory maps to the first
frame of physical memory, the second page maps to the second frame, and so
on. This direct mapping allows the kernel to calculate the physical address
from the kernel virtual address with simple arithmetic operations, by adding
or subtracting a constant offset.</p>
<p>The module defines three primary types for memory addresses: <a href="struct.Kva.html" title="struct keos::addressing::Kva"><code>Kva</code></a> for
kernel virtual address, <a href="struct.Va.html" title="struct keos::addressing::Va"><code>Va</code></a> for virtual address, and <a href="struct.Pa.html" title="struct keos::addressing::Pa"><code>Pa</code></a> for
physical address. These types are equipped with methods to facilitate
address manipulation, conversion between virtual and physical addresses, and
safe arithmetic operations on addresses.</p>
<p>In this abstraction, the kernel can seamlessly perform address calculations
and fastly convert between physical and kernel virtual adresses.</p>
<p>Both <a href="struct.Pa.html" title="struct keos::addressing::Pa"><code>Pa</code></a>, <a href="struct.Va.html" title="struct keos::addressing::Va"><code>Va</code></a> and <a href="struct.Kva.html" title="struct keos::addressing::Kva"><code>Kva</code></a> support arithmetic operations (addition,
subtraction, bitwise operations), which allow straightforward address
arithmetic. The types can be safely cast between virtual and physical
addresses, and the operations maintain the integrity of the memory model.</p>
<h3 id="arithmetic-operations"><a class="doc-anchor" href="#arithmetic-operations">ยง</a>Arithmetic Operations</h3>
<p>Both <code>Pa</code> and <code>Kva</code> types implement various arithmetic operations such as
addition, subtraction, and bitwise operations. These operations allow for
easy manipulation of addresses, such as incrementing or decrementing by
a specific number of bytes or performing logical operations on addresses.</p>
<h3 id="example-usage"><a class="doc-anchor" href="#example-usage">ยง</a>Example Usage:</h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// Create a physical address
</span><span class="kw">let </span>pa = Pa::new(<span class="number">0x1234_5678_9abc_0000</span>).unwrap();

<span class="comment">// Convert to kernel virtual address
</span><span class="kw">let </span>kva = pa.into_kva();

<span class="comment">// Perform arithmetic on addresses
</span><span class="kw">let </span>next_pa = pa + <span class="number">0x1000</span>; <span class="comment">// Move to the next page</span></code></pre></div>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">ยง</a></h2><dl class="item-table"><dt><a class="struct" href="struct.Kva.html" title="struct keos::addressing::Kva">Kva</a></dt><dd>Represents a kernel virtual address.</dd><dt><a class="struct" href="struct.Pa.html" title="struct keos::addressing::Pa">Pa</a></dt><dd>Represents a physical address.</dd><dt><a class="struct" href="struct.Va.html" title="struct keos::addressing::Va">Va</a></dt><dd>Represents a virtual address.</dd></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">ยง</a></h2><dl class="item-table"><dt><a class="constant" href="constant.PAGE_MASK.html" title="constant keos::addressing::PAGE_MASK">PAGE_<wbr>MASK</a></dt><dd>A mask for extracting the offset within a page from a given address.</dd><dt><a class="constant" href="constant.PAGE_SHIFT.html" title="constant keos::addressing::PAGE_SHIFT">PAGE_<wbr>SHIFT</a></dt><dd>The shift amount to get the page index from a given address.</dd><dt><a class="constant" href="constant.PAGE_SIZE.html" title="constant keos::addressing::PAGE_SIZE">PAGE_<wbr>SIZE</a></dt><dd>The size of a single page in memory, in bytes.</dd></dl></section></div></main></body></html>